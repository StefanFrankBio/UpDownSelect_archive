// process EXAMPLE {
//     output:
//     stdout

//     """
//     printf ${params.greeting}
//     """
// }

params.input_dir = "$baseDir/ncbi_dataset"
fasta_ch = Channel.fromPath("$params.input_dir/data**/*.fna")

process prepare_genome {
    
    input:
    path fasta

    output:
    path "*.fna"

    """
    python $baseDir/scripts/prepare_genome.py -f $fasta
    """
}

process prokka {

    input:
    path genome

    output:
    path "${genome.baseName}/*"

    """
    prokka --prefix $genome.baseName --locustag $genome.baseName --outdir $genome.baseName $genome
    """
}

workflow {
    genomes_ch = prepare_genome(fasta_ch)
    prokka_ch = prokka(genomes_ch)
}
